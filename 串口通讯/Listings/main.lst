C51 COMPILER V9.60.7.0   MAIN                                                              12/25/2023 22:34:49 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /*********************************************************************************************************
             -****
   2           * ã€ä½œ    è€…ã€‘ï¼š  å¬é£è‹¥ä¾
   3           * ã€ç‰ˆ    æœ¬ã€‘ï¼š  V1.0
   4           * ã€å®éªŒå¹³å°ã€‘ï¼š  æ¸…ç¿” QX-MCS51 å•ç‰‡æœºå¼€å‘æ¿
   5           * ã€å¤–éƒ¨æ™¶æŒ¯ã€‘ï¼š 11.0592mhz
   6           * ã€ä¸»æ§èŠ¯ç‰‡ã€‘ï¼š STC89C52
   7           * ã€ç¼–è¯‘ç¯å¢ƒã€‘ï¼š Keil Î¼Visio5
   8           * ã€ç¼–è¾‘ç¯å¢ƒã€‘ï¼š VS code
   9           * ã€æ¨¡å¼è¯´æ˜ã€‘ï¼š å®šæ—¶å™¨0å·¥ä½œæ¨¡å¼1ï¼Œ16ä½å®šæ—¶æ¨¡å¼ã€‚å®šæ—¶å™¨1å·¥ä½œæ¨¡å¼2, 8ä½è‡ªåŠ¨
             -é‡è£…ã€‚ä¸²å£å·¥ä½œæ–¹å¼1ï¼Œæ¯”ç‰¹ç‡9600ã€‚
  10           * ã€ä½¿ç”¨è¯´æ˜ã€‘ï¼š ä»¥ä¸­æ–­æ–¹å¼è¿›è¡Œä¸²å£é€šä¿¡ï¼Œå°†æ¥æ”¶åˆ°çš„æ•°æ®ç”¨æ•°ç ç®¡æ˜¾ç¤ºã€‚ 
  11           *********************************************************************************************************
             -*****/
  12          #include<reg52.h>
  13          #define uint unsigned int
  14          #define uchar unsigned char
  15          #define ulong unsigned long
  16          sbit DU = P2 ^ 6;
  17          sbit WE = P2 ^ 7;
  18          ulong number = 0;
  19          uchar code DUnumber[] = {0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F}; // å…±é˜´ææ•°ç ç®
             -¡æ®µé€‰è¡¨
  20          uchar code WEnumber[] = {0xfe, 0xfd, 0xfb, 0xf7, 0xef, 0xdf, 0xbf, 0x7f};             // å…«ä½æ•°ç ç®¡ä½
             -é€‰è¡¨ï¼ˆä½ç”µä½è¡¨ç¤ºé€‰ä¸­è¯¥æ•°ç ç®¡)
  21          /*===========================================
  22          å‡½æ•°  ï¼š disply(ulong i)
  23          å‚æ•°    ï¼š i è®¾å®šæ˜¾ç¤ºæ•°å­—ï¼Œå–å€¼èŒƒå›´0-99999999
  24          æè¿°  ï¼š å…«ä½å…±é˜´ææ•°ç ç®¡æ˜¾ç¤ºå‡½æ•°ã€‚
  25          ===========================================*/
  26          void disply(ulong i)
  27          {
  28   1      
  29   1          static uchar location;
  30   1          P0 = 0xFF;
  31   1          WE = 1;
  32   1          P0 = WEnumber[location];
  33   1          WE = 0;
  34   1          switch (location)
  35   1          {
  36   2          case 0:
  37   2              DU = 1;
  38   2              P0 = DUnumber[number / 10000000];
  39   2              DU = 0;
  40   2              break;
  41   2          case 1:
  42   2              DU = 1;
  43   2              P0 = DUnumber[number % 10000000 / 1000000];
  44   2              DU = 0;
  45   2              break;
  46   2          case 2:
  47   2              DU = 1;
  48   2              P0 = DUnumber[number % 1000000 / 100000];
  49   2              DU = 0;
C51 COMPILER V9.60.7.0   MAIN                                                              12/25/2023 22:34:49 PAGE 2   

  50   2              break;
  51   2          case 3:
  52   2              DU = 1;
  53   2              P0 = DUnumber[number % 100000 / 10000];
  54   2              DU = 0;
  55   2              break;
  56   2          case 4:
  57   2              DU = 1;
  58   2              P0 = DUnumber[number % 10000 / 1000];
  59   2              DU = 0;
  60   2              break;
  61   2          case 5:
  62   2              DU = 1;
  63   2              P0 = DUnumber[number % 1000 / 100];
  64   2              DU = 0;
  65   2              break;
  66   2          case 6:
  67   2              DU = 1;
  68   2              P0 = DUnumber[number % 100 / 10];
  69   2              DU = 0;
  70   2              break;
  71   2          case 7:
  72   2              DU = 1;
  73   2              P0 = DUnumber[number % 10];
  74   2              DU = 0;
  75   2              break;
  76   2          }
  77   1          location++;
  78   1          if (8 == location)
  79   1              location = 0;
  80   1      }
*** WARNING C280 IN LINE 26 OF main.c: 'i': unreferenced local variable
  81          /*=================================================
  82          å‡½æ•°  ï¼šInitializer0()
  83          å‚æ•°  ï¼šæ— 
  84          è¿”å›å€¼ï¼šæ— 
  85          æè¿°  ï¼šå®šæ—¶å™¨0åˆå§‹åŒ–ï¼Œç”¨äºæ§åˆ¶æ•°ç ç®¡æ˜¾ç¤ºæ¥æ”¶æ•°æ®ã€‚
  86          =================================================*/
  87          void Initializer0()
  88          {
  89   1          EA = 1;
  90   1          ET0 = 1;
  91   1          TR0 = 1;
  92   1          TMOD |= 0X01;
  93   1          // ä¸€è½®æœºå™¨å‘¨æœŸè€—æ—¶1.085us,12è½®æ—¶é’Ÿå‘¨æœŸä¸ºä¸€è½®æœºå™¨å‘¨æœŸã€‚
  94   1          TL0 = 0XFE;
  95   1          TH0 = 0XC9; // å®šæ—¶15msã€‚
  96   1      }
  97          /*=================================================
  98          å‡½æ•°  ï¼šInitializer1()
  99          å‚æ•°  ï¼šæ— 
 100          è¿”å›å€¼ï¼šæ— 
 101          æè¿°  ï¼šä»¥ä¸­æ–­æ–¹å¼è¿›è¡Œä¸²å£é€šä¿¡çš„åˆå§‹åŒ–ã€‚
 102          =================================================*/
 103          void Initializer1()
 104          {
 105   1        EA = 1;
 106   1        ES = 1;
 107   1        TR1 = 1;
 108   1        TMOD |= 0X20;
 109   1        SM0 = 0;
 110   1        SM1 = 1;
C51 COMPILER V9.60.7.0   MAIN                                                              12/25/2023 22:34:49 PAGE 3   

 111   1        REN = 1;
 112   1        TL1 = 0XFD;
 113   1        TH1 = 0XFD;
 114   1      } 
 115          
 116          void main()
 117          {
 118   1        Initializer0();
 119   1        Initializer1();
 120   1          while(1);
 121   1      }
 122          
 123          /*=========================================
 124          å‡½æ•°  ï¼štimer0()
 125          å‚æ•°  ï¼šæ— 
 126          è¿”å›å€¼ï¼šæ— 
 127          æè¿°  ï¼šå®šæ—¶å™¨0æº¢å‡ºå¼•å‘ä¸­æ–­ï¼Œæ˜¾ç¤ºæ¥æ”¶æ•°æ®ã€‚
 128          =========================================*/
 129          void Timer0() interrupt 1
 130          {
 131   1          TL0 = 0XFE;
 132   1          TH0 = 0XC9; 
 133   1          disply(number);
 134   1      }
 135          /*=========================================
 136          å‡½æ•°  ï¼šUART()
 137          å‚æ•°  ï¼šæ— 
 138          è¿”å›å€¼ï¼šæ— 
 139          æè¿°  ï¼šä¸²å£é€šä¿¡ä¸­æ–­å‡½æ•°
 140          =========================================*/
 141          //æ³¨æ„SNBFæ˜¯8ä½å¯„å­˜å™¨ï¼Œæœ€å¤§æ˜¯0XFF,æ‰€ä»¥å‘é€çš„æ•°æ®ä¸èƒ½è¶…è¿‡è¿™ä¸ªæ•°ã€‚
 142          void UART() interrupt 4
 143          {
 144   1        ulong i = 0;
 145   1        if(RI)//åˆ¤æ–­æ˜¯å¦æ¥æ”¶å®Œæˆã€‚
 146   1         {
 147   2           RI = 0;
 148   2           number = SBUF;
 149   2           i = number;
 150   2            SBUF = ++i;
 151   2         }
 152   1         if(TI)//åˆ¤æ–­æ˜¯å¦å‘é€å®Œæˆã€‚
 153   1         TI = 0;
 154   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    570    ----
   CONSTANT SIZE    =     18    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
